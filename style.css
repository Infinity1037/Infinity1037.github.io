/* ...‰øùÁïôÂéüÊúâÊ†∑Âºè... */

/* CSS @property Âä®ÊÄÅÊ∏êÂèòÂä®Áîª */
@property --border-angle {
    syntax: '<angle>';
    initial-value: 0deg;
    inherits: false;
}

@property --glow-hue {
    syntax: '<number>';
    initial-value: 0;
    inherits: false;
}

:root {
    --text-color: #ffffff;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

/* ËæìÂÖ•Ê°ÜÂÖÅËÆ∏ÈÄâÊã©ÊñáÂ≠ó */
input, textarea {
    -webkit-user-select: text;
    user-select: text;
    touch-action: auto;
}

/* È°µÈù¢‰∏çÂèØËßÅÊó∂ÊöÇÂÅúÂä®ÁîªËäÇÁúÅÁîµÈáè */
body.page-hidden *,
body.page-hidden *::before,
body.page-hidden *::after {
    animation-play-state: paused !important;
}

/* ÈîÆÁõòÂºπÂá∫Êó∂Èù¢ÊùøËæìÂÖ•ÈÄÇÈÖç */
body.keyboard-open .panel-input-bar {
    padding-bottom: 10px;
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: system-ui, -apple-system, "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
    min-height: 100vh;
    min-height: 100dvh;
    color: var(--text-color);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #f5576c, #4facfe, #00f2fe);
    background-size: 400% 400%;
    background-attachment: fixed;
    animation: gradientFlow 15s ease infinite;
    overflow-x: hidden;
    overflow-y: auto;
    position: relative;
    overscroll-behavior-y: contain;
    -webkit-overflow-scrolling: touch;
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    transition: background 1.5s ease;
}

/* Â§©Ê∞îË£ÖÈ•∞Â±Ç */
.weather-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
}

/* Á≤íÂ≠êÂ±Ç */
.particle-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 100;
    overflow: hidden;
}

/* ÂèØÁà±ÊµÆÂä®Ë£ÖÈ•∞ */
.cute-float {
    position: fixed;
    pointer-events: none;
    z-index: 1;
    opacity: 0;
    animation: cuteFloat linear infinite;
    font-size: 12px;
}

@keyframes cuteFloat {
    0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
    }
    8% { opacity: 0.4; }
    85% { opacity: 0.3; }
    100% {
        transform: translateY(-20vh) rotate(360deg);
        opacity: 0;
    }
}

/* ‰∫ëÊúµ */
.cloud {
    position: absolute;
    background: rgba(255, 255, 255, 0.4);
    /* Â¢ûÂä†‰∏çÈÄèÊòéÂ∫¶ */
    border-radius: 50px;
    animation: cloudFloat linear infinite;
    filter: blur(8px);
    /* Â¢ûÂä†Ê®°Á≥äÊÑü */
}

/* ÁÆÄÂçïÁöÑ‰∫ëÊúµÂΩ¢Áä∂ */
.cloud::after,
.cloud::before {
    content: '';
    position: absolute;
    background: inherit;
    border-radius: 50%;
}

.cloud::after {
    width: 50px;
    height: 50px;
    top: -25px;
    left: 15px;
}

.cloud::before {
    width: 40px;
    height: 40px;
    top: -15px;
    left: 40px;
}

@keyframes cloudFloat {
    from {
        transform: translateX(-200px);
    }

    to {
        transform: translateX(120vw);
    }
}

/* ËäÇÊó•Ë£ÖÈ•∞Á≤íÂ≠ê */
.holiday-particle {
    position: absolute;
    top: -30px;
    animation: holidayFall linear infinite;
    pointer-events: none;
    opacity: 0.8;
    z-index: 1;
}

@keyframes holidayFall {
    0% {
        transform: translateY(-30px) rotate(0deg);
        opacity: 0;
    }
    10% {
        opacity: 0.8;
    }
    90% {
        opacity: 0.6;
    }
    100% {
        transform: translateY(110vh) rotate(360deg);
        opacity: 0;
    }
}

/* ÊòüÊòü */
.star {
    position: absolute;
    background: white;
    border-radius: 50%;
    animation: starTwinkle ease-in-out infinite;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
}

@keyframes starTwinkle {

    0%,
    100% {
        opacity: 0.3;
        transform: scale(0.8);
    }

    50% {
        opacity: 1;
        transform: scale(1.2);
    }
}

/* ...‰øùÁïôÂéüÊù•ÁöÑÊ†∑Âºè... */
@keyframes gradientFlow {
    0% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }

    100% {
        background-position: 0% 50%;
    }
}

.background-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(66, 134, 244, 0.3), rgba(55, 59, 68, 0.3));
    z-index: 1;
    pointer-events: none;
}

/* ÈöêËóèÊªöÂä®Êù° */
body::-webkit-scrollbar {
    display: none;
}

.background-overlay::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: -1;
}

.container {
    position: relative;
    z-index: 2;
    text-align: center;
    padding: env(safe-area-inset-top, 0.5rem) 0.9rem env(safe-area-inset-bottom, 0.5rem);
    padding-right: 56px;
    width: 100%;
    max-width: 460px;
    height: 100vh;
    height: 100dvh;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0;
    overflow: hidden;
}

.greeting-box {
    --border-angle: 0deg;
    background: rgba(255, 255, 255, 0.1);
    padding: 0.8rem 1rem;
    border-radius: 28px;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2), inset 0 1px 0 rgba(255,255,255,0.12);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1.5px solid transparent;
    background-image: 
        linear-gradient(rgba(255,255,255,0.1), rgba(255,255,255,0.05)),
        conic-gradient(from var(--border-angle), 
            rgba(255,182,193,0.6), rgba(186,152,255,0.6), rgba(135,206,250,0.6),
            rgba(255,218,185,0.6), rgba(255,182,193,0.6));
    background-origin: border-box;
    background-clip: padding-box, border-box;
    animation: rotateBorder 6s linear infinite;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-evenly;
    width: 100%;
    flex: 1;
    min-height: 0;
    position: relative;
    overflow: hidden;
}

/* ===== È°∂ÈÉ®Ê†èÔºöÈóÆÂÄô+Êó∂Èó¥ ===== */
.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    margin-bottom: 2px;
}

.top-left { text-align: left; }

.top-left h1 {
    font-size: 1.25rem;
    margin: 0;
}

.top-left .subtitle {
    font-size: 0.72rem;
    margin: 2px 0 0;
    opacity: 0.65;
    letter-spacing: 0.5px;
}

.top-right {
    text-align: right;
    flex-shrink: 0;
}

.top-time {
    font-size: 1.3rem;
    font-weight: 700;
    color: rgba(255,255,255,0.95);
    font-variant-numeric: tabular-nums;
    letter-spacing: 1px;
    background: linear-gradient(135deg, #fff, #ffd6e0, #d6c5ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    background-size: 200% 200%;
    animation: timeGradient 4s ease infinite;
}

.top-date {
    font-size: 0.6rem;
    opacity: 0.6;
    color: rgba(255,255,255,0.8);
}

/* ===== Âø´Êç∑‰ø°ÊÅØÂç°Áâá ===== */
.quick-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 6px;
    width: 100%;
    flex-shrink: 0;
}

.quick-card {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 12px;
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 14px;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    -webkit-tap-highlight-color: transparent;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
}

.quick-card:active {
    transform: scale(0.95);
    background: rgba(255,255,255,0.22);
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
}

.quick-card.love-card {
    background: linear-gradient(135deg, rgba(255,130,180,0.18), rgba(255,200,230,0.12));
    border-color: rgba(255,150,200,0.25);
}

.quick-card[data-panel="fortune-panel"] {
    background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,180,100,0.10));
    border-color: rgba(255,200,80,0.22);
}

.quick-card[data-panel="quest-panel"] {
    background: linear-gradient(135deg, rgba(120,230,160,0.14), rgba(80,200,120,0.08));
    border-color: rgba(100,210,140,0.20);
}

.quick-card[data-panel="cat-panel"] {
    background: linear-gradient(135deg, rgba(180,140,255,0.16), rgba(200,170,255,0.10));
    border-color: rgba(180,150,255,0.22);
}

.qc-icon {
    font-size: 16px;
    flex-shrink: 0;
}

.qc-content {
    text-align: left;
    min-width: 0;
}

.qc-label {
    font-size: 9px;
    opacity: 0.55;
    line-height: 1;
}

.qc-value {
    font-size: 12px;
    font-weight: 700;
    line-height: 1.3;
    color: rgba(255,255,255,0.95);
}

/* ===== ÊÉÖËØùÊâìÂ≠óÊú∫Âç°Áâá ===== */
.quote-card {
    width: 100%;
    padding: 12px 16px;
    background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,200,230,0.08), rgba(180,160,255,0.06));
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    flex-shrink: 0;
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 12px rgba(255,180,220,0.08);
}

.quote-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 50%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.06), transparent);
    animation: quoteShimmer 4s ease-in-out infinite;
}

@keyframes quoteShimmer {
    0%, 100% { left: -100%; }
    50% { left: 150%; }
}

.quote-deco {
    font-size: 22px;
    flex-shrink: 0;
    animation: decoFloat 3s ease-in-out infinite;
}

@keyframes decoFloat {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-3px) rotate(5deg); }
}

.quote-main {
    flex: 1;
    display: flex;
    align-items: center;
    min-width: 0;
}

.quote-text {
    font-size: 13px;
    color: rgba(255,255,255,0.9);
    font-style: italic;
    line-height: 1.5;
    letter-spacing: 0.5px;
    text-shadow: 0 1px 6px rgba(0,0,0,0.1);
}

.quote-cursor {
    color: rgba(255,200,230,0.8);
    font-weight: 300;
    font-size: 14px;
    animation: cursorBlink 1s step-end infinite;
    margin-left: 1px;
}

@keyframes cursorBlink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

.quote-hint {
    font-size: 9px;
    color: rgba(255,255,255,0.35);
    flex-shrink: 0;
    writing-mode: vertical-rl;
}

/* ===== Ëø∑‰Ω†‰ø°ÊÅØÊ†è ===== */
.mini-info {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    font-size: 11px;
    color: rgba(255,255,255,0.75);
    padding: 6px 16px;
    width: auto;
    flex-shrink: 0;
    background: rgba(255,255,255,0.08);
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,0.08);
    letter-spacing: 0.3px;
}

/* ===== Âè≥‰æßÂØºËà™Ê†è ===== */
.bottom-nav {
    position: fixed;
    right: max(6px, env(safe-area-inset-right, 6px));
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3px;
    z-index: 100;
    padding: 10px 5px;
    background: linear-gradient(180deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08));
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 24px;
    border: 1px solid rgba(255,255,255,0.18);
    box-shadow: 0 4px 24px rgba(0,0,0,0.12), inset 0 1px 0 rgba(255,255,255,0.1);
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1px;
    background: transparent;
    border: none;
    border-radius: 14px;
    padding: 6px 6px;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    transition: all 0.2s;
    min-width: 40px;
}

.nav-item:active {
    transform: scale(0.9);
    background: rgba(255,255,255,0.25);
}

.nav-item.active {
    background: linear-gradient(135deg, rgba(255,255,255,0.35), rgba(255,200,230,0.25));
    box-shadow: 0 2px 12px rgba(255,180,220,0.25);
    transform: scale(1.08);
}

.nav-item.active .nav-label {
    color: #fff;
    font-weight: 700;
}

.nav-icon {
    font-size: 16px;
    line-height: 1;
}

.nav-label {
    font-size: 8px;
    color: rgba(255,255,255,0.75);
    font-weight: 500;
}

/* ===== ÂäüËÉΩÈù¢ÊùøÔºàÂè≥‰æßÊªëÂá∫Ôºâ ===== */
.panel-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0);
    z-index: 200;
    display: flex;
    align-items: stretch;
    justify-content: flex-end;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s ease, background 0.4s ease, backdrop-filter 0.4s ease, -webkit-backdrop-filter 0.4s ease;
    backdrop-filter: blur(0px);
    -webkit-backdrop-filter: blur(0px);
}

.panel-overlay.show {
    opacity: 1;
    pointer-events: auto;
    background: rgba(0,0,0,0.35);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.panel-sheet {
    width: 82%;
    max-width: 340px;
    height: 100%;
    background: linear-gradient(180deg, #fff, #fdf2f8);
    border-radius: 24px 0 0 24px;
    padding: 0 16px calc(16px + env(safe-area-inset-bottom, 0px));
    padding-top: env(safe-area-inset-top, 12px);
    display: flex;
    flex-direction: column;
    transform: translateX(105%);
    transition: transform 0.45s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: -8px 0 40px rgba(0,0,0,0.15);
    overflow: hidden;
    will-change: transform;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    position: relative;
}

.panel-overlay.show .panel-sheet {
    transform: translateX(0);
}

.panel-handle {
    width: 36px;
    height: 4px;
    background: rgba(0,0,0,0.12);
    border-radius: 2px;
    margin: 10px auto 8px;
    flex-shrink: 0;
}

.panel-close {
    position: absolute;
    top: 10px;
    left: 10px;
    width: 32px;
    height: 32px;
    border: none;
    border-radius: 50%;
    background: rgba(0,0,0,0.06);
    color: #999;
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
    transition: all 0.15s;
    z-index: 5;
}

.panel-close:active {
    transform: scale(0.85);
    background: rgba(0,0,0,0.12);
}

.panel-title {
    font-size: 16px;
    font-weight: 700;
    text-align: center;
    color: #333;
    margin-bottom: 12px;
    flex-shrink: 0;
    opacity: 0;
    transform: translateY(8px);
    transition: opacity 0.3s ease 0.15s, transform 0.3s ease 0.15s;
}

.panel-overlay.show .panel-title {
    opacity: 1;
    transform: translateY(0);
}

.panel-body {
    flex: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
    padding-bottom: 8px;
    scrollbar-width: thin;
    scrollbar-color: rgba(0,0,0,0.08) transparent;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.35s ease 0.2s, transform 0.35s ease 0.2s;
}

.panel-overlay.show .panel-body {
    opacity: 1;
    transform: translateY(0);
}

.panel-body.no-transition {
    transition: none;
    opacity: 1;
    transform: none;
}

.panel-body::-webkit-scrollbar {
    width: 3px;
}

.panel-body::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.1);
    border-radius: 3px;
}

.panel-body::-webkit-scrollbar-track {
    background: transparent;
}

.panel-section {
    padding: 10px 0;
    border-top: 1px solid rgba(0,0,0,0.06);
}

/* ===== Èù¢ÊùøÂÜÖËÅîËæìÂÖ•Ê†è ===== */
.panel-input-bar {
    display: flex;
    gap: 8px;
    padding: 10px 0;
    border-top: 1px solid rgba(0,0,0,0.06);
    flex-shrink: 0;
}

.panel-input {
    flex: 1;
    border: 1px solid rgba(0,0,0,0.1);
    border-radius: 20px;
    padding: 10px 16px;
    font-size: 14px;
    background: rgba(0,0,0,0.03);
    outline: none;
    color: #333;
    transition: border-color 0.2s;
    min-height: 44px;
    -webkit-appearance: none;
    appearance: none;
}

.panel-input:focus {
    border-color: rgba(200,140,255,0.4);
    background: #fff;
}

.panel-send-btn {
    padding: 10px 18px;
    border: none;
    border-radius: 20px;
    background: linear-gradient(135deg, #c084fc, #f9a8d4);
    color: #fff;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    flex-shrink: 0;
    transition: all 0.15s;
    -webkit-tap-highlight-color: transparent;
    min-height: 44px;
    min-width: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.panel-send-btn:active {
    transform: scale(0.93);
}

/* ===== ÁïôË®ÄÂàóË°® ===== */
.msg-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex: 1;
    min-height: 0;
}

.msg-item {
    padding: 10px 12px;
    background: rgba(0,0,0,0.03);
    border-radius: 12px;
    animation: msgFadeIn 0.3s ease;
}

.msg-item-text {
    font-size: 13px;
    color: #444;
    line-height: 1.4;
    word-break: break-all;
}

.msg-item-time {
    font-size: 10px;
    color: #aaa;
    margin-top: 4px;
}

.msg-empty {
    text-align: center;
    color: #bbb;
    font-size: 13px;
    padding: 30px 0;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}

@keyframes msgFadeIn {
    from { opacity: 0; transform: translateY(6px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ===== ÊÇÑÊÇÑËØùÊèêÁ§∫ ===== */
.whisper-hint {
    text-align: center;
    color: #c08090;
    font-size: 13px;
    padding: 30px 16px;
    font-style: italic;
    background: linear-gradient(135deg, rgba(255,180,220,0.08), rgba(200,160,255,0.06));
    border-radius: 14px;
    border: 1px dashed rgba(255,140,200,0.2);
}

/* ÊÇÑÊÇÑËØùÈù¢ÊùøÂÜÖÂÆπÂ±Ö‰∏≠ */
#whisper-panel .panel-body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: stretch;
}

.greeting-box::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 28px;
    background: rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(2px);
    z-index: -1;
}

@keyframes rotateBorder {
    to { --border-angle: 360deg; }
}

h1 {
    font-size: 1.15rem;
    font-weight: 700;
    margin-bottom: 0;
    letter-spacing: 1px;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
    background: linear-gradient(135deg, #fff, rgba(255, 220, 240, 0.9));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.subtitle {
    font-size: 0.7rem;
    font-weight: 300;
    margin-bottom: 0;
    opacity: 0.75;
    letter-spacing: 0.5px;
}

/* Áå´Âí™Âå∫Âüü */
.cat-area {
    width: 100%;
    flex: 0 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    gap: 4px;
}

.cat-area::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -55%);
    width: 160px;
    height: 160px;
    background: radial-gradient(circle, rgba(255, 180, 220, 0.25) 0%, rgba(180,160,255,0.1) 40%, transparent 70%);
    border-radius: 50%;
    pointer-events: none;
    z-index: 0;
    animation: glowPulse 4s ease-in-out infinite;
}

@keyframes glowPulse {
    0%, 100% { transform: translate(-50%, -55%) scale(1); opacity: 0.6; }
    50% { transform: translate(-50%, -55%) scale(1.15); opacity: 1; }
}

.cat-speech {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.35), rgba(255, 220, 240, 0.28));
    padding: 7px 16px;
    border-radius: 18px 18px 18px 5px;
    font-size: 12.5px;
    letter-spacing: 0.3px;
    margin-bottom: 4px;
    animation: speechPulse 3s ease-in-out infinite;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.25);
    box-shadow: 0 3px 14px rgba(255, 180, 220, 0.2);
    transition: opacity 0.3s, transform 0.3s;
    position: relative;
    text-shadow: 0 1px 4px rgba(0,0,0,0.06);
}

.cat-speech.changing {
    opacity: 0;
    transform: scale(0.95);
}

@keyframes speechPulse {

    0%,
    100% {
        transform: scale(1);
        opacity: 0.9;
    }

    50% {
        transform: scale(1.02);
        opacity: 1;
    }
}

.cat-wrapper {
    position: relative;
    animation: catFloat 3s ease-in-out infinite;
    margin-bottom: 0;
    flex-shrink: 0;
}

@keyframes catFloat {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-8px);
    }
}

.cat-static {
    width: 110px;
    position: relative;
    cursor: pointer;
    transition: transform 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    padding: 15px;
    margin: -15px;
}

.cat-static:active {
    transform: scale(0.9) !important;
}

.cat-static.tapped {
    animation: catBounce 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes catBounce {
    0% {
        transform: scale(0.9);
    }

    40% {
        transform: scale(1.1) translateY(-10px);
    }

    100% {
        transform: scale(1) translateY(0);
    }
}

.cat-svg {
    width: 100%;
    filter: drop-shadow(0 6px 15px rgba(0, 0, 0, 0.2));
    transition: filter 0.3s;
}

/* Áå´Âí™Áä∂ÊÄÅ‰∏ç‰Ω≥Êó∂ÁöÑËßÜËßâÊèêÁ§∫ */
.cat-static.sad .cat-svg {
    filter: drop-shadow(0 6px 20px rgba(255, 100, 100, 0.4));
}

.cat-static.happy .cat-svg {
    filter: drop-shadow(0 6px 20px rgba(255, 200, 100, 0.4));
}

.cat-static.sleeping .cat-svg {
    filter: drop-shadow(0 6px 20px rgba(150, 150, 255, 0.3));
}

.cat-static.sleeping {
    animation: none;
}

.cat-wrapper:has(.sleeping) {
    animation: catSleep 4s ease-in-out infinite;
}

@keyframes catSleep {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-3px) rotate(2deg); }
}

/* Áú®ÁúºÂä®Áîª */
.eye {
    transform-origin: center;
    transition: transform 0.1s;
}

.eye.blink {
    transform: scaleY(0.1);
}

.meow-bubble {
    position: absolute;
    top: -15px;
    right: -30px;
    background: linear-gradient(135deg, #fff5f7, #fff0f6, #fce7f3);
    color: #d6336c;
    padding: 8px 16px;
    border-radius: 16px 16px 16px 4px;
    font-size: 14px;
    font-weight: 600;
    opacity: 0;
    transform: scale(0.5) translateY(10px);
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    pointer-events: none;
    box-shadow: 0 4px 18px rgba(255, 120, 170, 0.3), 0 2px 6px rgba(0, 0, 0, 0.08);
    white-space: nowrap;
    z-index: 10;
    border: 1px solid rgba(255, 180, 210, 0.4);
    -webkit-tap-highlight-color: transparent;
}

.meow-bubble.show {
    opacity: 1;
    transform: scale(1) translateY(0);
    animation: bubblePop 0.4s ease;
    pointer-events: auto;
    cursor: pointer;
}

@keyframes bubblePop {
    0% { transform: scale(0.5) translateY(10px); }
    50% { transform: scale(1.1) translateY(-5px); }
    100% { transform: scale(1) translateY(0); }
}

.stats-simple {
    width: 100%;
    margin: 4px 0;
    padding: 8px 12px;
    display: flex;
    flex-direction: column;
    gap: 5px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.14);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1), 0 2px 8px rgba(0,0,0,0.05);
    flex-shrink: 0;
}

.stat-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 2px 0;
}

.stat-item.warning .stat-icon {
    animation: iconShake 0.5s ease-in-out infinite;
}

@keyframes iconShake {

    0%,
    100% {
        transform: rotate(0);
    }

    25% {
        transform: rotate(-15deg);
    }

    75% {
        transform: rotate(15deg);
    }
}

.stat-icon {
    width: 22px;
    text-align: center;
    font-size: 15px;
}

.stat-bar {
    flex: 1;
    height: 12px;
    background: rgba(0, 0, 0, 0.18);
    border-radius: 6px;
    overflow: hidden;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.15);
}

.stat-fill {
    height: 100%;
    border-radius: 6px;
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 0 6px rgba(255,255,255,0.15);
    position: relative;
    overflow: hidden;
}

.stat-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: -60%;
    width: 40%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.35), transparent);
    animation: barShine 2.5s ease-in-out infinite;
}

@keyframes barShine {
    0% { left: -60%; }
    60% { left: 120%; }
    100% { left: 120%; }
}

.stat-fill.hunger {
    background: linear-gradient(90deg, #FFB75E, #ED8F03);
    box-shadow: 0 0 8px rgba(237, 143, 3, 0.3);
}

.stat-fill.mood {
    background: linear-gradient(90deg, #FF9A9E, #FECFEF);
    box-shadow: 0 0 8px rgba(255, 154, 158, 0.3);
}

.stat-fill.energy {
    background: linear-gradient(90deg, #00C9FF, #92FE9D);
    box-shadow: 0 0 8px rgba(0, 201, 255, 0.3);
}

.stat-fill.low {
    animation: barPulse 1s ease-in-out infinite;
}

@keyframes barPulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}

.stat-num {
    width: 36px;
    text-align: right;
    font-size: 12px;
    font-weight: 600;
    font-variant-numeric: tabular-nums;
    opacity: 0.9;
    transition: transform 0.2s, color 0.3s;
}

.stat-num.pulse {
    animation: numPulse 0.3s ease;
    color: #fff;
}

@keyframes numPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.cat-actions {
    display: flex;
    gap: 10px;
    margin: 4px 0;
    width: 100%;
    justify-content: center;
    position: relative;
    flex-shrink: 0;
    padding: 0 4px;
}

/* È£üÁâ©ÈÄâÊã©ËèúÂçï */
.food-menu {
    display: none;
    flex-direction: row;
    gap: 6px;
    padding: 8px 10px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
    width: 100%;
    justify-content: center;
    transform: translateY(-8px) scale(0.95);
    opacity: 0;
    transition: all 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    margin-bottom: 4px;
}

.food-menu.show {
    display: flex;
    opacity: 1;
    transform: translateY(0) scale(1);
}

.food-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    padding: 6px 8px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.15s;
    min-width: 48px;
    -webkit-tap-highlight-color: transparent;
}

.food-item:active {
    transform: scale(0.9);
    background: rgba(102, 126, 234, 0.15);
}

.food-item.locked {
    opacity: 0.4;
    cursor: default;
}

.food-item.locked:active {
    transform: none;
    background: none;
}

.food-item.limit {
    opacity: 0.35;
    cursor: default;
}

.food-item.limit:active {
    transform: none;
    background: none;
}

.food-icon {
    font-size: 20px;
}

.food-name {
    font-size: 10px;
    color: #555;
    white-space: nowrap;
}

.food-limit {
    color: #999;
    font-size: 9px;
}

/* Áå´Âí™Ë£ÖÊâÆ */
.cat-accessory {
    position: absolute;
    pointer-events: none;
    z-index: 2;
    font-size: 28px;
    transition: all 0.3s;
}

.cat-accessory.acc-ribbon { top: 2%; left: 62%; }
.cat-accessory.acc-crown { top: -8%; left: 50%; transform: translateX(-50%); font-size: 32px; }
.cat-accessory.acc-glasses { top: 32%; left: 50%; transform: translateX(-50%); font-size: 24px; }
.cat-accessory.acc-flower { top: 0%; left: 25%; }
.cat-accessory.acc-hat { top: -12%; left: 50%; transform: translateX(-50%); font-size: 36px; }
.cat-accessory.acc-scarf { top: 58%; left: 50%; transform: translateX(-50%); font-size: 22px; }
.cat-accessory.acc-halo { top: -14%; left: 50%; transform: translateX(-50%); font-size: 30px; animation: haloGlow 2s ease-in-out infinite; }
.cat-accessory.acc-star { top: -10%; left: 50%; transform: translateX(-50%); font-size: 26px; animation: starSpin 3s linear infinite; }

@keyframes haloGlow {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.4); }
}

@keyframes starSpin {
    from { transform: translateX(-50%) rotate(0deg); }
    to { transform: translateX(-50%) rotate(360deg); }
}

.accessory-btn {
    position: absolute;
    bottom: 8px;
    right: 0;
    width: 32px;
    height: 32px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.25);
    font-size: 16px;
    cursor: pointer;
    z-index: 3;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
    transition: all 0.15s;
}

.accessory-btn:active {
    transform: scale(0.9);
    background: rgba(255, 255, 255, 0.4);
}

.accessory-panel {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-bottom: 8px;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 4px;
    padding: 10px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
    z-index: 10;
    width: 180px;
    animation: panelPop 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes panelPop {
    from { opacity: 0; transform: translateX(-50%) scale(0.9); }
    to { opacity: 1; transform: translateX(-50%) scale(1); }
}

.acc-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    padding: 5px 7px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.15s;
    min-width: 40px;
    -webkit-tap-highlight-color: transparent;
}

.acc-item:active { transform: scale(0.9); background: rgba(102, 126, 234, 0.15); }
.acc-item.locked { opacity: 0.35; cursor: default; }
.acc-item.locked:active { transform: none; background: none; }
.acc-item.active { background: rgba(102, 126, 234, 0.2); border-radius: 10px; }

.acc-icon { font-size: 20px; }
.acc-name { font-size: 9px; color: #555; white-space: nowrap; }

.action-btn {
    flex: 1;
    max-width: 120px;
    min-height: 48px;
    background: rgba(255, 255, 255, 0.15);
    border: 1.5px solid rgba(255, 255, 255, 0.25);
    color: white;
    padding: 12px 0;
    border-radius: 22px;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    box-shadow: 0 4px 18px rgba(0,0,0,0.12), inset 0 1px 0 rgba(255,255,255,0.25);
    -webkit-tap-highlight-color: transparent;
}

.action-btn .btn-icon {
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.action-btn:hover .btn-icon,
.action-btn:active .btn-icon {
    transform: scale(1.25) rotate(-8deg);
}

#feed-btn {
    background: linear-gradient(135deg, rgba(255, 183, 94, 0.4), rgba(237, 143, 3, 0.22));
    border-color: rgba(255, 183, 94, 0.35);
    box-shadow: 0 4px 18px rgba(237, 143, 3, 0.15), inset 0 1px 0 rgba(255,255,255,0.25);
}

#pet-btn {
    background: linear-gradient(135deg, rgba(255, 154, 158, 0.4), rgba(254, 207, 239, 0.22));
    border-color: rgba(255, 154, 158, 0.35);
    box-shadow: 0 4px 18px rgba(255, 154, 158, 0.15), inset 0 1px 0 rgba(255,255,255,0.25);
}

#play-btn {
    background: linear-gradient(135deg, rgba(0, 201, 255, 0.35), rgba(146, 254, 157, 0.22));
    border-color: rgba(0, 201, 255, 0.3);
    box-shadow: 0 4px 18px rgba(0, 201, 255, 0.15), inset 0 1px 0 rgba(255,255,255,0.25);
}

/* Ëß¶Êë∏Ê∂üÊº™ÊïàÊûú */
.action-btn::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.3s, height 0.3s;
}

.action-btn:active::after {
    width: 200px;
    height: 200px;
}

.action-btn:active {
    transform: scale(0.93);
    background: rgba(255, 255, 255, 0.35);
}

#feed-btn:active {
    box-shadow: 0 0 20px rgba(255, 183, 94, 0.5), 0 0 40px rgba(255, 183, 94, 0.2);
}

#pet-btn:active {
    box-shadow: 0 0 20px rgba(255, 154, 158, 0.5), 0 0 40px rgba(255, 154, 158, 0.2);
}

#play-btn:active {
    box-shadow: 0 0 20px rgba(0, 201, 255, 0.5), 0 0 40px rgba(0, 201, 255, 0.2);
}

/* ÊåâÈíÆÁ¶ÅÁî®Áä∂ÊÄÅÔºàÂÜ∑Âç¥‰∏≠Ôºâ */
.action-btn.cooldown {
    opacity: 0.5;
    pointer-events: none;
    filter: grayscale(0.3);
}

.action-btn.cooldown .btn-text {
    font-size: 11px;
    opacity: 0.7;
}

.action-btn.cooldown .btn-icon {
    animation: iconSpin 0.3s ease;
}

@keyframes iconSpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.btn-icon {
    font-size: 18px;
    transition: transform 0.2s;
}

.action-btn:active .btn-icon {
    transform: scale(1.2);
}

.btn-text {
    font-weight: 500;
    font-size: 14px;
}

.particle {
    position: absolute;
    pointer-events: none;
    animation: particleFly 1s ease-out forwards;
    font-size: 20px;
    z-index: 100;
}

@keyframes particleFly {
    0% {
        transform: translate(-50%, -50%) scale(0.5);
        opacity: 0;
    }

    20% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.2);
    }

    100% {
        transform: translate(var(--tx), var(--ty)) scale(0);
        opacity: 0;
    }
}

.combo-number {
    position: fixed;
    font-size: 20px;
    font-weight: 800;
    color: #fff;
    text-shadow: 0 2px 8px rgba(255, 100, 100, 0.6);
    pointer-events: none;
    z-index: 50;
    transform: translate(-50%, 0);
    animation: comboUp 0.8s ease-out forwards;
}

@keyframes comboUp {
    0% { opacity: 1; transform: translate(-50%, 0) scale(0.5); }
    30% { opacity: 1; transform: translate(-50%, -10px) scale(1.2); }
    100% { opacity: 0; transform: translate(-50%, -50px) scale(0.8); }
}

/* ÂØπÊñπËß¶Êë∏Ê∂üÊº™ */
.partner-ripple {
    position: fixed;
    width: 40px;
    height: 40px;
    border: 2px solid rgba(255, 130, 180, 0.6);
    border-radius: 50%;
    pointer-events: none;
    z-index: 45;
    transform: translate(-50%, -50%) scale(0.3);
    animation: rippleExpand 1s ease-out forwards;
}

@keyframes rippleExpand {
    0% { transform: translate(-50%, -50%) scale(0.3); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
}

.partner-heart {
    position: fixed;
    font-size: 18px;
    pointer-events: none;
    z-index: 46;
    transform: translate(-50%, -50%);
    animation: heartFloat 1.2s ease-out forwards;
}

@keyframes heartFloat {
    0% { opacity: 1; transform: translate(-50%, -50%) scale(0.5); }
    30% { opacity: 1; transform: translate(-50%, -70%) scale(1.1); }
    100% { opacity: 0; transform: translate(-50%, -100%) scale(0.6); }
}

.stats-info {
    font-size: 11px;
    opacity: 0.6;
    margin-top: 6px;
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 12px;
}

.stats-row {
    display: flex;
    justify-content: center;
    align-items: center;
    color: #555;
    gap: 8px;
    flex-wrap: wrap;
    font-size: 13px;
}

.stats-row span:not(.stats-divider) {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    padding: 4px 10px;
    background: rgba(0,0,0,0.03);
    border-radius: 10px;
    transition: transform 0.15s;
}

.stats-row span:not(.stats-divider):active {
    transform: scale(0.95);
}

.stats-divider {
    opacity: 0.5;
}

.streak-row {
    display: flex;
    justify-content: center;
    align-items: center;
    color: #555;
    gap: 6px;
    margin-top: 3px;
    font-size: 13px;
    padding: 6px 14px;
    background: linear-gradient(135deg, rgba(255,160,50,0.08), rgba(255,100,50,0.04));
    border-radius: 12px;
}

.streak-flame {
    font-size: 12px;
    animation: flameGlow 1.5s ease-in-out infinite;
}

@keyframes flameGlow {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
}

@keyframes timeGradient {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

#time.tick {
    transform: scale(1.03);
}

/* TAÂú®Á∫øÊåáÁ§∫Âô® */
.partner-status-bar {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    opacity: 0.7;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 20px;
}

.partner-status-bar.online {
    opacity: 1;
    color: #a0f0c0;
    background: rgba(74, 222, 128, 0.08);
    border: 1px solid rgba(74, 222, 128, 0.15);
    animation: statusGlow 2s ease-in-out infinite;
}

@keyframes statusGlow {
    0%, 100% { box-shadow: 0 0 0 rgba(74, 222, 128, 0); }
    50% { box-shadow: 0 0 12px rgba(74, 222, 128, 0.15); }
}

.partner-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    display: inline-block;
    transition: all 0.3s;
}

.partner-dot.online {
    background: #4ade80;
    box-shadow: 0 0 6px #4ade80;
    animation: dotPulse 1.5s ease-in-out infinite;
}

@keyframes dotPulse {
    0%, 100% { box-shadow: 0 0 4px #4ade80; }
    50% { box-shadow: 0 0 12px #4ade80, 0 0 20px rgba(74, 222, 128, 0.3); }
}

/* ÊÅãÁà±Â§©Êï∞ + ÊÉÖËØù */
.love-container {
    margin-top: 0;
    text-align: center;
    width: 100%;
    padding: 12px 14px;
    background: linear-gradient(135deg, rgba(255, 180, 220, 0.15), rgba(255, 140, 180, 0.08));
    border-radius: 16px;
}

.love-days {
    font-size: 14px;
    color: #555;
    letter-spacing: 0.5px;
}

.love-days #love-days,
.love-days #love-days-panel {
    font-weight: 800;
    font-size: 20px;
    background: linear-gradient(135deg, #f472b6, #fb923c);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.love-heart {
    display: inline-block;
    animation: heartPulse 1.2s ease-in-out infinite;
}

@keyframes heartPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.25); }
}

.love-quote {
    font-size: 13px;
    color: #888;
    margin-top: 5px;
    font-style: italic;
    line-height: 1.4;
}

.holiday-countdown {
    margin-top: 6px;
    font-size: 12px;
    color: #777;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2px;
}

.holiday-countdown.today {
    opacity: 1;
    font-weight: 600;
    animation: hcGlow 2s ease-in-out infinite;
}

@keyframes hcGlow {
    0%, 100% { opacity: 0.8; }
    50% { opacity: 1; text-shadow: 0 0 8px rgba(255,255,255,0.5); }
}

.holiday-countdown b {
    font-weight: 600;
}

.hc-icon {
    font-size: 13px;
}

/* ÊØèÊó•ËøêÂäøÊäΩÁ≠æ */
.fortune-container {
    margin-top: 0;
    padding-top: 0;
    width: 100%;
    position: relative;
}

/* ÊÅãÁà±Èù¢ÊùøÂÜÖÂÆπÂ±Ö‰∏≠ */
#love-panel .panel-body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: stretch;
}

/* ËøêÂäøÈù¢ÊùøÂÜÖÂÆπÂ±Ö‰∏≠ */
#fortune-panel .panel-body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.fortune-card {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 10px 16px;
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 180, 100, 0.08));
    border: 1px solid rgba(255, 215, 0, 0.2);
    border-radius: 16px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 13px;
    -webkit-tap-highlight-color: transparent;
    min-height: 42px;
}

.fortune-card:active {
    transform: scale(0.96);
    background: rgba(255, 255, 255, 0.2);
}

.fortune-card.revealed:active {
    transform: none;
}

.fortune-card.flipping {
    animation: fortuneFlip 0.6s ease;
}

@keyframes fortuneFlip {
    0% { transform: perspective(600px) rotateY(0deg); }
    50% { transform: perspective(600px) rotateY(90deg); box-shadow: 0 8px 30px rgba(255,215,0,0.3); }
    100% { transform: perspective(600px) rotateY(0deg); }
}

.fortune-card.revealed {
    cursor: default;
    background: linear-gradient(135deg, rgba(255,248,220,0.25), rgba(255,223,130,0.12));
    border-color: rgba(255,200,50,0.3);
    box-shadow: 0 2px 16px rgba(255,215,0,0.12);
}

.fortune-icon {
    font-size: 14px;
}

.fortune-text {
    font-size: 13px;
    color: #555;
}

.fortune-level {
    font-weight: 700;
    font-size: 13px;
}

/* Êé•È±ºÂ∞èÊ∏∏Êàè */
.fish-pond {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 5;
    overflow: hidden;
}

.swim-fish {
    position: absolute;
    font-size: 22px;
    pointer-events: auto;
    cursor: pointer;
    z-index: 6;
    transition: transform 0.3s, opacity 0.3s;
    -webkit-tap-highlight-color: transparent;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
}

.swim-fish.from-left {
    left: -30px;
    animation: swimRight 5s linear forwards;
}

.swim-fish.from-right {
    right: -30px;
    animation: swimLeft 5s linear forwards;
}

.swim-fish.caught {
    pointer-events: none;
    transition: transform 0.3s, opacity 0.3s;
}

.swim-fish.fish-gone {
    opacity: 0;
    transform: scale(0.5);
    pointer-events: none;
}

@keyframes swimRight {
    0% { transform: translateX(0) scaleX(1); }
    100% { transform: translateX(calc(100vw + 60px)) scaleX(1); }
}

@keyframes swimLeft {
    0% { transform: translateX(0) scaleX(-1); }
    100% { transform: translateX(calc(-100vw - 60px)) scaleX(-1); }
}

/* ÊØèÊó•‰ªªÂä° */
.quest-container {
    margin-top: 0;
    padding-top: 0;
    width: 100%;
    position: relative;
}

/* Áå´Âí™Èù¢ÊùøÂÜÖÂÆπÂ±Ö‰∏≠ */
#cat-panel .panel-body {
    display: flex;
    flex-direction: column;
    justify-content: center;
}

/* ‰ªªÂä°Èù¢ÊùøÂÜÖÂÆπÂ±Ö‰∏≠ */
#quest-panel .panel-body {
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.quest-container::before {
    content: '';
    display: none;
    font-size: 10px;
    letter-spacing: 4px;
    opacity: 0.3;
    margin-bottom: 4px;
}

.quest-title {
    font-size: 11px;
    opacity: 0.7;
    margin-bottom: 6px;
    text-align: center;
}

.quest-list {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.quest-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: rgba(0, 0, 0, 0.03);
    border-radius: 12px;
    transition: all 0.2s;
    -webkit-tap-highlight-color: transparent;
    min-height: 40px;
}

.quest-item.done {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 165, 0, 0.1));
    border: 1px solid rgba(255, 215, 0, 0.2);
    cursor: pointer;
}

.quest-item.done:active {
    transform: scale(0.97);
}

.quest-item.claimed {
    opacity: 0.5;
}

.quest-icon {
    font-size: 16px;
    flex-shrink: 0;
}

.quest-info {
    flex: 1;
    min-width: 0;
}

.quest-desc {
    font-size: 12px;
    color: #444;
    margin-bottom: 3px;
}

.quest-bar {
    height: 4px;
    background: rgba(0, 0, 0, 0.15);
    border-radius: 2px;
    overflow: hidden;
}

.quest-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #7bed9f, #2ed573);
    border-radius: 2px;
    transition: width 0.4s ease;
}

.quest-item.done .quest-bar-fill {
    background: linear-gradient(90deg, #ffa502, #ff6b6b);
}

.quest-status {
    font-size: 12px;
    flex-shrink: 0;
    min-width: 28px;
    color: #555;
    text-align: right;
}

/* ÊàêÂ∞±ÂæΩÁ´† */
.badges-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 2px;
    margin-top: 4px;
    flex-wrap: wrap;
    min-height: 18px;
}

.badge {
    font-size: 13px;
    display: inline-block;
    transition: transform 0.2s;
}

.badge.unlocked {
    animation: badgePop 0.3s ease;
}

.badge:active {
    transform: scale(1.3);
}

@keyframes badgePop {
    0% { transform: scale(0); }
    60% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.badge-hint {
    font-size: 10px;
    opacity: 0.5;
}

/* ÈöèÊú∫‰∫ã‰ª∂ÂºπÁ™ó */
.event-popup {
    position: fixed;
    top: 12%;
    left: 50%;
    transform: translateX(-50%) translateY(-20px);
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    padding: 10px 18px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 8px;
    z-index: 100;
    opacity: 0;
    pointer-events: none;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
    white-space: nowrap;
}

.event-popup.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
    pointer-events: auto;
}

.event-icon {
    font-size: 18px;
}

.event-text {
    font-size: 13px;
}

/* Âèå‰∫∫‰∫íÂä®ÊèêÁ§∫ */
.action-toast {
    position: fixed;
    bottom: 15%;
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: rgba(255, 255, 255, 0.92);
    color: #555;
    padding: 8px 18px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 500;
    z-index: 99;
    opacity: 0;
    pointer-events: none;
    transition: all 0.35s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
    white-space: nowrap;
}

.action-toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

/* ÊàêÂ∞±Ëß£ÈîÅÂºπÁ™ó */
.badge-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.5);
    background: rgba(255, 255, 255, 0.97);
    border-radius: 24px;
    padding: 24px 36px;
    text-align: center;
    z-index: 200;
    opacity: 0;
    pointer-events: none;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);
}

.badge-popup.show {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
}

.badge-popup-icon {
    font-size: 48px;
    animation: badgeBounce 0.6s ease;
}

.badge-popup-label {
    font-size: 13px;
    color: #999;
    margin-top: 6px;
}

.badge-popup-name {
    font-size: 18px;
    font-weight: 700;
    color: #333;
    margin-top: 4px;
}

@keyframes badgeBounce {
    0% { transform: scale(0); }
    50% { transform: scale(1.3); }
    100% { transform: scale(1); }
}


/* Áå´Âí™Â∞èÊó•ËÆ∞ */
.cat-diary-container {
    margin-top: 8px;
    width: 100%;
}

.cat-diary {
    font-size: 13px;
    color: #666;
    font-style: italic;
    padding: 14px 18px;
    background: linear-gradient(145deg, #fffbf0, #fff5f8, #fdf2f8);
    border-radius: 14px;
    border-left: 3px solid rgba(255, 180, 210, 0.4);
    line-height: 1.7;
    position: relative;
    overflow: hidden;
    font-family: 'Georgia', 'STKaiti', 'KaiTi', serif;
    letter-spacing: 0.3px;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.04), 0 2px 8px rgba(0,0,0,0.03);
}

.cat-diary::before {
    content: 'üìñ';
    position: absolute;
    top: 8px;
    right: 10px;
    font-size: 14px;
    opacity: 0.15;
    font-style: normal;
}

.cat-diary::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 16px;
    right: 16px;
    height: 1px;
    background: repeating-linear-gradient(90deg, rgba(200,180,190,0.2) 0px, rgba(200,180,190,0.2) 4px, transparent 4px, transparent 8px);
}


/* ===== AI ËÅäÂ§©Èù¢Êùø ===== */

/* ËßÜÂõæÂàáÊç¢ */
.ai-view {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
}

/* ËøîÂõûÊåâÈíÆ */
.ai-back-btn {
    position: absolute;
    left: 50px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
    padding: 4px 8px;
    color: #888;
    transition: color 0.2s;
    z-index: 2;
}

.ai-back-btn:active { color: #333; }

/* ‰ºöËØùÂàóË°® */
.ai-session-body {
    flex: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

.ai-session-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 4px 0;
}

.ai-session-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    border-radius: 16px;
    background: rgba(255,255,255,0.6);
    border: 1px solid rgba(0,0,0,0.04);
    cursor: pointer;
    transition: all 0.2s;
}

.ai-session-item:active {
    transform: scale(0.98);
    background: rgba(255,230,240,0.5);
}

.ai-session-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
    border: 2px solid rgba(255,180,210,0.3);
}

.ai-session-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.ai-session-info {
    flex: 1;
    min-width: 0;
}

.ai-session-nick {
    font-size: 13px;
    font-weight: 600;
    color: #444;
    margin-bottom: 3px;
}

.ai-session-date {
    font-size: 10px;
    color: #bbb;
    font-weight: 400;
    margin-left: 4px;
}

.ai-session-preview {
    font-size: 11.5px;
    color: #999;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.ai-session-time {
    font-size: 10px;
    color: #bbb;
    flex-shrink: 0;
}

.ai-session-empty {
    text-align: center;
    padding: 40px 20px;
    color: #ccc;
    font-size: 13px;
}

.ai-session-empty-icon {
    font-size: 40px;
    display: block;
    margin-bottom: 8px;
}

.ai-session-empty-icon img {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    object-fit: cover;
}

/* Êñ∞Âª∫ËÅäÂ§©ÊåâÈíÆ */

.ai-new-chat-btn {
    width: 100%;
    padding: 13px;
    border: none;
    border-radius: 16px;
    background: linear-gradient(135deg, #f9a8c9, #c8a0f8);
    color: #fff;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.25s;
    box-shadow: 0 3px 12px rgba(200,100,180,0.2);
}

.ai-new-chat-btn:active {
    transform: scale(0.97);
}

/* ÊòµÁß∞ÈÄâÊã© */
.ai-nickname-select {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex: 1;
    gap: 24px;
    padding: 40px 20px;
}

.ai-nickname-hint {
    font-size: 15px;
    color: #666;
    text-align: center;
}

.ai-nickname-btns {
    display: flex;
    gap: 16px;
}

.ai-nickname-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    padding: 20px 28px;
    border: 1.5px solid rgba(0,0,0,0.08);
    border-radius: 20px;
    background: linear-gradient(135deg, #fff, #fdf2f8);
    font-size: 14px;
    cursor: pointer;
    transition: all 0.25s;
    box-shadow: 0 2px 10px rgba(0,0,0,0.06);
}

.ai-nickname-btn:active {
    transform: scale(0.95);
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
}

.ai-nick-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid rgba(255,180,210,0.3);
}

/* Âà†Èô§ÊåâÈíÆ */
.ai-chat-clear-btn {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    font-size: 14px;
    cursor: pointer;
    opacity: 0.4;
    transition: opacity 0.2s;
    padding: 4px;
}

.ai-chat-clear-btn:active {
    opacity: 0.8;
}

/* Âä†ËΩΩÊèêÁ§∫ */
.ai-chat-loading {
    text-align: center;
    color: #aaa;
    font-size: 12px;
    padding: 20px 0;
}

.ai-chat-loading.hidden {
    display: none;
}

/* ËÅäÂ§©Âå∫Âüü */
.ai-chat-body {
    display: flex;
    flex-direction: column;
}

.ai-chat-messages {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 4px 0;
}

/* Êó∂Èó¥ÂàÜÈöî */
.ai-msg-time {
    text-align: center;
    font-size: 10px;
    color: #bbb;
    padding: 6px 0 2px;
}

/* ÂèëÈÄÅËÄÖÊ†áÁ≠æ */
.ai-msg-sender {
    font-size: 10px;
    color: #999;
    margin-bottom: 2px;
    padding: 0 4px;
}

.ai-msg-user .ai-msg-sender {
    text-align: right;
}

.ai-msg {
    display: flex;
    gap: 8px;
    max-width: 88%;
    animation: msgFadeIn 0.3s ease;
}

.ai-msg.no-anim {
    animation: none;
}

@keyframes msgFadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}

.ai-msg-cat {
    align-self: flex-start;
}

.ai-msg-user {
    align-self: flex-end;
    flex-direction: row-reverse;
}

.ai-msg-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    flex-shrink: 0;
    background: rgba(255,200,220,0.15);
    overflow: hidden;
}

.ai-msg-user .ai-msg-avatar {
    background: rgba(130,180,255,0.15);
}

.ai-msg-avatar img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}

.ai-msg-content {
    display: flex;
    flex-direction: column;
    min-width: 0;
}

.ai-msg-bubble {
    padding: 10px 14px;
    border-radius: 16px;
    font-size: 13.5px;
    line-height: 1.6;
    color: #333;
    word-break: break-word;
    position: relative;
}

.ai-msg-cat .ai-msg-bubble {
    background: linear-gradient(135deg, #fff5f8, #fef0f5);
    border: 1px solid rgba(255,180,210,0.2);
    border-radius: 4px 16px 16px 16px;
    box-shadow: 0 2px 8px rgba(255,150,190,0.08);
}

.ai-msg-user .ai-msg-bubble {
    background: linear-gradient(135deg, #e8f0fe, #dce8fc);
    border: 1px solid rgba(130,180,255,0.2);
    border-radius: 16px 4px 16px 16px;
    box-shadow: 0 2px 8px rgba(100,150,255,0.08);
}

.ai-msg-bubble .typing-dots {
    display: inline-flex;
    gap: 4px;
    padding: 2px 0;
}

.ai-msg-bubble .typing-dots span {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #ccc;
    animation: dotBounce 1.2s ease-in-out infinite;
}

.ai-msg-bubble .typing-dots span:nth-child(2) { animation-delay: 0.15s; }
.ai-msg-bubble .typing-dots span:nth-child(3) { animation-delay: 0.3s; }

@keyframes dotBounce {
    0%, 60%, 100% { transform: translateY(0); background: #ccc; }
    30% { transform: translateY(-6px); background: #f9a8c9; }
}

.ai-chat-input-bar {
    border-top: 1px solid rgba(0,0,0,0.06);
    padding-top: 8px !important;
}

#ai-chat-send:disabled {
    opacity: 0.5;
    pointer-events: none;
}

/* Á©∫ËÅäÂ§©ÊèêÁ§∫ */
.ai-chat-empty {
    text-align: center;
    padding: 30px 20px;
    color: #ccc;
    font-size: 13px;
}

.ai-chat-empty .ai-chat-empty-icon {
    font-size: 40px;
    display: block;
    margin-bottom: 8px;
}

.ai-chat-empty .ai-chat-empty-icon img {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    object-fit: cover;
}

/* AI Âà†Èô§Á°ÆËÆ§ÂºπÁ™ó */
.ai-confirm-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.4);
    z-index: 300;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s;
}

.ai-confirm-overlay.show {
    opacity: 1;
    pointer-events: auto;
}

.ai-confirm-box {
    background: #fff;
    border-radius: 20px;
    padding: 28px 24px 20px;
    width: 280px;
    text-align: center;
    transform: scale(0.9);
    transition: transform 0.25s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 10px 40px rgba(0,0,0,0.15);
}

.ai-confirm-overlay.show .ai-confirm-box {
    transform: scale(1);
}

.ai-confirm-icon {
    font-size: 36px;
    margin-bottom: 12px;
}

.ai-confirm-text {
    font-size: 15px;
    font-weight: 600;
    color: #333;
    margin-bottom: 6px;
}

.ai-confirm-sub {
    font-size: 12px;
    color: #aaa;
    margin-bottom: 20px;
}

.ai-confirm-btns {
    display: flex;
    gap: 10px;
}

.ai-confirm-cancel,
.ai-confirm-delete {
    flex: 1;
    padding: 11px;
    border: none;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.ai-confirm-cancel {
    background: #f2f2f2;
    color: #666;
}

.ai-confirm-cancel:active {
    background: #e5e5e5;
}

.ai-confirm-delete {
    background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
    color: #fff;
    box-shadow: 0 3px 10px rgba(255,100,100,0.3);
}

.ai-confirm-delete:active {
    transform: scale(0.96);
}

/* Áù°Áú†Ê®°ÂºèÊåâÈíÆÁÇπÂáªÂèçÈ¶à */
.sleep-disabled {
    cursor: not-allowed;
}

.sleep-shake {
    animation: sleepShake 0.4s ease;
}

@keyframes sleepShake {
    0%, 100% { transform: translateX(0); }
    20% { transform: translateX(-4px); }
    40% { transform: translateX(4px); }
    60% { transform: translateX(-3px); }
    80% { transform: translateX(2px); }
}

/* Êñ∞Âª∫ËÅäÂ§©ÊåâÈíÆ */
.ai-new-chat-bar {
    display: flex;
    padding: 10px 16px;
    flex-shrink: 0;
}

/* Ê®°ÂºèÈÄâÊã© */
.ai-mode-select {
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 24px 16px;
}

.ai-mode-card {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 16px 18px;
    border: 1.5px solid #f0e8f5;
    border-radius: 16px;
    background: linear-gradient(135deg, #fef9ff, #f8f0ff);
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
}

.ai-mode-card:active {
    transform: scale(0.97);
    border-color: #d4b8e8;
    background: linear-gradient(135deg, #f8f0ff, #f0e0ff);
}

.ai-mode-icon {
    font-size: 32px;
    flex-shrink: 0;
}

.ai-mode-info {
    flex: 1;
    min-width: 0;
}

.ai-mode-name {
    font-size: 15px;
    font-weight: 600;
    color: #444;
    margin-bottom: 3px;
}

.ai-mode-desc {
    font-size: 12px;
    color: #aaa;
}

/* Áæ§ËÅäÊ∂àÊÅØÂèëÈÄÅËÄÖÊ†áÁ≠æ */
.ai-msg-sender {
    font-size: 10px;
    color: #bbb;
    margin-bottom: 2px;
    padding: 0 4px;
}

.ai-msg-cat .ai-msg-sender {
    text-align: left;
}

.ai-msg-user .ai-msg-sender {
    text-align: right;
}

/* Áæ§ËÅä‰∏≠ÂÖ∂‰ªñÁî®Êà∑Ê∂àÊÅØÔºàÂ∑¶‰æßÊòæÁ§∫Ôºâ */
.ai-msg-other {
    align-self: flex-start;
}

.ai-msg-other .ai-msg-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
}

.ai-msg-other .ai-msg-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.ai-msg-other .ai-msg-bubble {
    background: #f0f0f0;
    color: #333;
    border-radius: 2px 16px 16px 16px;
}

/* ÊÇÑÊÇÑËØùÂºπÁ™óÔºàÊî∂Âà∞Êó∂Ôºâ */
.whisper-popup {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 210;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
}

.whisper-popup.show {
    opacity: 1;
    pointer-events: auto;
}

.whisper-popup-inner {
    background: linear-gradient(145deg, #fff8fa, #fff0f6, #fce7f3);
    border-radius: 28px;
    padding: 32px 24px 28px;
    text-align: center;
    max-width: 310px;
    width: 88%;
    transform: scale(0.8);
    transition: transform 0.35s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    box-shadow: 0 20px 60px rgba(231, 84, 128, 0.2), 0 8px 24px rgba(0,0,0,0.1);
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(255, 180, 210, 0.3);
}

.whisper-popup-inner::before {
    content: '‚ù§Ô∏è';
    position: absolute;
    top: 12px;
    right: 16px;
    font-size: 20px;
    opacity: 0.15;
    animation: heartPulse 1.2s ease-in-out infinite;
}

.whisper-popup-inner::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle at 30% 20%, rgba(255,182,193,0.1) 0%, transparent 50%);
    pointer-events: none;
}

.whisper-popup.show .whisper-popup-inner {
    transform: scale(1);
}

.whisper-popup-header {
    font-size: 17px;
    font-weight: 700;
    background: linear-gradient(135deg, #e75480, #d6336c);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 16px;
    letter-spacing: 1px;
}

.whisper-popup-text {
    font-size: 18px;
    color: #444;
    line-height: 1.7;
    padding: 14px 16px;
    font-style: italic;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 14px;
    border-left: 3px solid rgba(231, 84, 128, 0.3);
}

.whisper-popup-btn {
    margin-top: 18px;
    padding: 12px 32px;
    border: none;
    border-radius: 22px;
    background: linear-gradient(135deg, #f472b6, #e75480);
    color: #fff;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    transition: all 0.15s;
    box-shadow: 0 4px 16px rgba(231, 84, 128, 0.3);
    min-height: 44px;
    letter-spacing: 1px;
}

.whisper-popup-btn:active {
    transform: scale(0.95);
}



@media (max-width: 380px) {
    h1 { font-size: 1rem; }
    .top-time { font-size: 1.1rem; }
    .cat-static { width: 90px; }
    .greeting-box { padding: 0.6rem 0.8rem; }
    .quick-card { padding: 6px 8px; }
    .qc-value { font-size: 11px; }
}

body.theme-morning {
    background: linear-gradient(-45deg, #ffecd2, #fcb69f, #ff9a9e, #fecfef);
}

body.theme-afternoon {
    background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #4facfe);
}

body.theme-evening {
    background: linear-gradient(-45deg, #1a2980, #26d0ce, #4facfe, #43e97b);
}

body.theme-night {
    background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #1e3c72);
}

/* ÊéàÊùÉÁ†ÅÁïåÈù¢ */
.auth-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    backdrop-filter: blur(10px);
    transition: opacity 0.4s;
    overscroll-behavior: none;
}

.auth-content {
    text-align: center;
    padding: 2rem 1.5rem;
    width: 100%;
    max-width: 340px;
}

.auth-cat {
    width: 70px;
    height: 70px;
    margin: 0 auto 16px;
    animation: loadingFloat 1.5s ease-in-out infinite;
}

.auth-title {
    font-size: 1.2rem;
    font-weight: 500;
    letter-spacing: 2px;
    margin-bottom: 20px;
    opacity: 0.9;
}

.auth-input-wrap {
    margin-bottom: 16px;
}

.auth-input {
    width: 100%;
    padding: 14px 18px;
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 16px;
    color: white;
    font-size: 16px;
    text-align: center;
    letter-spacing: 4px;
    outline: none;
    transition: all 0.2s;
    backdrop-filter: blur(4px);
    -webkit-appearance: none;
    appearance: none;
}

.auth-input::placeholder {
    color: rgba(255, 255, 255, 0.5);
    letter-spacing: 2px;
}

.auth-input:focus {
    border-color: rgba(255, 255, 255, 0.6);
    background: rgba(255, 255, 255, 0.2);
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
}

.auth-input.shake {
    animation: inputShake 0.4s ease;
}

@keyframes inputShake {
    0%, 100% { transform: translateX(0); }
    20% { transform: translateX(-8px); }
    40% { transform: translateX(8px); }
    60% { transform: translateX(-5px); }
    80% { transform: translateX(5px); }
}

.auth-btn {
    width: 100%;
    padding: 16px;
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 18px;
    color: white;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s;
    -webkit-tap-highlight-color: transparent;
    letter-spacing: 4px;
    min-height: 50px;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    box-shadow: 0 2px 12px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.15);
}

.auth-btn:active {
    transform: scale(0.96);
    background: rgba(255, 255, 255, 0.35);
}

.auth-btn:disabled {
    opacity: 0.5;
    pointer-events: none;
}

.auth-error {
    margin-top: 12px;
    font-size: 13px;
    color: #ff6b6b;
    min-height: 20px;
    transition: opacity 0.3s;
}

.loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: inherit;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999;
    transition: opacity 0.4s;
    backdrop-filter: blur(10px);
}

.loading-cat {
    width: 90px;
    height: 90px;
    margin: 0 auto 18px;
    animation: loadingFloat 1.5s ease-in-out infinite;
    filter: drop-shadow(0 8px 20px rgba(255, 150, 200, 0.3));
}

/* Âä†ËΩΩËøõÂ∫¶Êù° */
.loading-progress {
    width: 140px;
    height: 5px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 3px;
    margin: 18px auto 0;
    overflow: hidden;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
}

.loading-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #f9a8d4, #c084fc, #93c5fd, #f9a8d4);
    background-size: 200% 100%;
    border-radius: 3px;
    animation: loadingBar 2s ease-in-out infinite, loadingShine 1.5s linear infinite;
    box-shadow: 0 0 8px rgba(192, 132, 252, 0.4);
}

@keyframes loadingBar {
    0% { width: 0%; }
    50% { width: 75%; }
    100% { width: 100%; }
}

@keyframes loadingShine {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

@keyframes loadingFloat {

    0%,
    100% {
        transform: translateY(0);
        opacity: 0.5;
    }

    50% {
        transform: translateY(-10px);
        opacity: 0.8;
    }
}

.loading-text {
    font-size: 1rem;
    letter-spacing: 3px;
    opacity: 0.85;
    font-weight: 300;
}

/* ËøûÊé•Â§±Ë¥•Êó∂ÁöÑÈáçËØïÊåâÈíÆ */
.retry-btn {
    margin-top: 20px;
    padding: 12px 24px;
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 20px;
    color: white;
    font-size: 14px;
    cursor: pointer;
    display: none;
}

.retry-btn:active {
    transform: scale(0.95);
    background: rgba(255, 255, 255, 0.3);
}

.loading-text::after {
    content: '';
    animation: dots 1.5s steps(3, end) infinite;
}

@keyframes dots {

    0%,
    20% {
        content: '';
    }

    40% {
        content: '.';
    }

    60% {
        content: '..';
    }

    80%,
    100% {
        content: '...';
    }
}

#main-content {
    transition: opacity 0.5s ease;
    visibility: hidden;
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 0;
    width: 100%;
}

#main-content.loaded {
    visibility: visible;
}

/* ÂÆâÂÖ®Âå∫ÂüüÈÄÇÈÖçÔºàÂàòÊµ∑Â±èÔºâ */
@supports (padding: env(safe-area-inset-top)) {
    .container {
        padding-top: env(safe-area-inset-top, 0.5rem);
    }
}

/* ‰ºòÂåñÊªöÂä®ÊÄßËÉΩ */
.greeting-box {
    will-change: transform;
    transform: translateZ(0);
}

/* ÂáèÂ∞ëÂä®ÁîªÂú®‰ΩéÁîµÈáèÊ®°Âºè‰∏ãÁöÑÊ∂àËÄó */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
    }
}

/* Ê®™Â±è‰ºòÂåñ */
@media (max-height: 500px) and (orientation: landscape) {
    .cat-static { width: 50px; }
    .cat-speech { display: none; }
    .quick-cards { display: none; }
    .quote-card { display: none; }
    .stats-simple { gap: 2px; padding: 4px 8px; }
    .bottom-nav { gap: 2px; padding: 4px 3px; }
    .nav-item { padding: 4px 4px; }
    .nav-icon { font-size: 13px; }
    .nav-label { display: none; }
}

/* ËæÉÁüÆÂ±èÂπï */
@media (max-height: 650px) {
    .cat-static { width: 80px; }
    .stats-simple { padding: 5px 8px; gap: 3px; }
    .top-time { font-size: 1.1rem; }
    .quick-cards { gap: 4px; }
    .quick-card { padding: 6px 8px; }
    .qc-icon { font-size: 14px; }
    .qc-value { font-size: 11px; }
    .qc-label { font-size: 8px; }
    .quote-card { padding: 6px 10px; }
    .quote-text { font-size: 11px; }
    .quote-deco { font-size: 18px; }
}

/* Ë∂ÖÂ∞èÂ±èÂπï */
@media (max-width: 320px) {
    .greeting-box { padding: 0.5rem 0.7rem; }
    .cat-static { width: 75px; }
    .action-btn { padding: 8px 0; min-height: 38px; }
    .container { padding-right: 48px; }
    .bottom-nav { padding: 6px 3px; }
    .nav-item { padding: 6px 4px; min-width: 36px; }
    .nav-icon { font-size: 14px; }
    .nav-label { font-size: 7px; }
}

/* Ëß¶Êë∏ÂèçÈ¶àÂ¢ûÂº∫ */
@media (hover: none) and (pointer: coarse) {
    .action-btn:active {
        transform: scale(0.92);
    }
    
    .cat-static:active {
        transform: scale(0.85) !important;
    }
}

/* ÊÅãÁà±Â§©Êï∞Êï∞Â≠óÂÖ•Âú∫Âä®Áîª */
.love-days #love-days,
.love-days #love-days-panel {
    display: inline-block;
    animation: countReveal 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s backwards;
}

@keyframes countReveal {
    from {
        opacity: 0;
        transform: scale(0.3) translateY(8px);
        filter: blur(6px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
        filter: blur(0);
    }
}

/* Â±ûÊÄßÊù°ÂæÆÂÖâÊâ´ÊèèÊïàÊûú */
.stat-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 60%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);
    animation: shimmer 3s ease-in-out infinite;
}

.stat-fill {
    position: relative;
    overflow: hidden;
}

@keyframes shimmer {
    0% { left: -100%; }
    50% { left: 150%; }
    100% { left: 150%; }
}

/* ÊåâÈíÆÂõæÊ†áÂæÆÂä®Áîª */
.btn-icon {
    display: inline-block;
}

#feed-btn .btn-icon {
    animation: iconWiggle 3s ease-in-out infinite;
}

#pet-btn .btn-icon {
    animation: iconWave 2.5s ease-in-out infinite;
}

#play-btn .btn-icon {
    animation: iconBounce 2s ease-in-out infinite;
}

@keyframes iconWiggle {
    0%, 85%, 100% { transform: rotate(0deg); }
    90% { transform: rotate(-8deg); }
    95% { transform: rotate(8deg); }
}

@keyframes iconWave {
    0%, 80%, 100% { transform: rotate(0deg); }
    85% { transform: rotate(12deg); }
    90% { transform: rotate(-5deg); }
    95% { transform: rotate(6deg); }
}

@keyframes iconBounce {
    0%, 80%, 100% { transform: translateY(0); }
    85% { transform: translateY(-3px); }
    92% { transform: translateY(0); }
    96% { transform: translateY(-1px); }
}

/* ‰ΩéÁ´ØËÆæÂ§áÊÄßËÉΩ‰ºòÂåñ - Á¶ÅÁî®Âä®Áîª */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    body {
        background: linear-gradient(-45deg, #667eea, #764ba2);
        background-size: 100% 100%;
        animation: none;
    }
}
